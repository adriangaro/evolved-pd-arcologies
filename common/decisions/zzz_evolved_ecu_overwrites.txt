# Arcology Project
decision_arcology_project = {
	owned_planets_only = yes
	icon = decision_arcology_project

	enactment_time = 2700 #3600 2700
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
		cost = {
			trigger = {
				owner = {
					has_tradition = tr_tec_artifice_final_2
				}
			}
			minerals = -10000
		}
		cost = {
			trigger = {
				owner = {
					has_ethic = ethic_industrial
				}
			}
			influence = -50
		}
		cost = {
			trigger = {
				owner = {
					has_ethic = ethic_fanatic_industrial
				}
			}
			influence = -100
		}
	}

	potential = {
		tec_pd_arc_arcology_project_potential = yes
		tec_pd_arc_arcology_project_urbancorp = no
	}

	allow = {
		tec_pd_arc_arcology_project_allow = yes
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_arcology_project_effects
		hidden_effect = {
			tec_pd_arc_generic_city_planet_logic_start = { change_pc = pc_city }

			set_industrial_focus_flags = yes

			relic_world_conversion_effect = {
				DISTRICT = district_arcology_housing
				VARIABLE = num_housing_districts
			}
			relic_world_conversion_effect = {
				DISTRICT = district_arcology_arms_industry
				VARIABLE = num_industrial_districts
			}

			set_ecu_industrial_districts_effect = yes
			add_deposit = d_pd_industrial_sector

			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = mega.200 }

			tec_pd_arc_generic_city_planet_logic_finish = yes
		}
	}

	ai_weight = {
		weight = 100
	}
}

# Arcology Project (Relic Worlds)
decision_arcology_project_relic = {
	owned_planets_only = yes
	icon = decision_arcology_project

	enactment_time = 2700 #3600 2700
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
		cost = {
			trigger = {
				owner = {
					has_tradition = tr_tec_artifice_final_2
				}
			}
			minerals = -10000
		}
		cost = {
			trigger = {
				owner = {
					has_ethic = ethic_industrial
				}
			}
			influence = -50
		}
		cost = {
			trigger = {
				owner = {
					has_ethic = ethic_fanatic_industrial
				}
			}
			influence = -100
		}
	}

	potential = {
		tec_pd_arc_arcology_project_relic_potential = yes
		tec_pd_arc_arcology_project_urbancorp = no
	}

	allow = {
		tec_pd_arc_arcology_project_relic_allow = yes
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_arcology_project_effects
		hidden_effect = {
			tec_pd_arc_generic_city_planet_logic_start = { change_pc = pc_city relic = yes }
			
			set_industrial_focus_flags = yes
			relic_world_conversion_effect = {
				DISTRICT = district_arcology_housing
				VARIABLE = num_housing_districts
			}
			relic_world_conversion_effect = {
				DISTRICT = district_arcology_arms_industry
				VARIABLE = num_industrial_districts
			}
			set_ecu_industrial_districts_effect = yes

			add_deposit = d_pd_industrial_sector

			planet_event = { 
				id = mega.201 
			}

			tec_pd_arc_generic_city_planet_logic_finish = { relic = yes }
		}
	}
	ai_weight = {
		weight = 100
	}
}

# Arcology Project for Urban Idyll megacorps
decision_arcology_project_tec_corporate_urbancorp = {
	owned_planets_only = yes
	icon = decision_arcology_project
	
	enactment_time = 2000 #3000
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
		cost = {
			trigger = {
				owner = {
					has_tradition = tr_tec_artifice_final_2
				}
			}
			minerals = -10000
		}
		cost = {
			trigger = {
				owner = {
					has_ethic = ethic_industrial
				}
			}
			influence = -50
		}
		cost = {
			trigger = {
				owner = {
					has_ethic = ethic_fanatic_industrial
				}
			}
			influence = -100
		}
	}
	
	potential = {
		tec_pd_arc_arcology_project_potential = yes
		tec_pd_arc_arcology_project_urbancorp = yes
	}
	
	allow = {
		tec_pd_arc_arcology_project_allow = yes
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_arcology_project_effects
		hidden_effect = {
			tec_pd_arc_generic_city_planet_logic_start = { change_pc = pc_city }

			set_industrial_focus_flags = yes

			relic_world_conversion_effect = {
				DISTRICT = district_arcology_housing
				VARIABLE = num_housing_districts
			}
			relic_world_conversion_effect = {
				DISTRICT = district_arcology_arms_industry
				VARIABLE = num_industrial_districts
			}

			set_ecu_industrial_districts_effect = yes
			add_deposit = d_pd_industrial_sector

			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = mega.200 }

			tec_pd_arc_generic_city_planet_logic_finish = yes
		}
	
		# /
	}
	
	ai_weight = {
		weight = 100
	}
}

# Arcology Project (Relic Worlds) for urban idyll megacorps
decision_arcology_project_relic_tec_corporate_urbancorp = {
	owned_planets_only = yes
	icon = decision_arcology_project

	enactment_time = 2000 #3000
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
		cost = {
			trigger = {
				owner = {
					has_tradition = tr_tec_artifice_final_2
				}
			}
			minerals = -10000
		}
		cost = {
			trigger = {
				owner = {
					has_ethic = ethic_industrial
				}
			}
			influence = -50
		}
		cost = {
			trigger = {
				owner = {
					has_ethic = ethic_fanatic_industrial
				}
			}
			influence = -100
		}
	}
	
	potential = {
		tec_pd_arc_arcology_project_relic_potential = yes
		tec_pd_arc_arcology_project_urbancorp = yes
	}
	
	allow = {
		tec_pd_arc_arcology_project_relic_allow = yes
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_arcology_project_effects
		hidden_effect = {
			tec_pd_arc_generic_city_planet_logic_start = { change_pc = pc_city relic = yes }
			
			set_industrial_focus_flags = yes
			relic_world_conversion_effect = {
				DISTRICT = district_arcology_housing
				VARIABLE = num_housing_districts
			}
			relic_world_conversion_effect = {
				DISTRICT = district_arcology_arms_industry
				VARIABLE = num_industrial_districts
			}
			set_ecu_industrial_districts_effect = yes

			add_deposit = d_pd_industrial_sector

			planet_event = { 
				id = mega.201 
			}

			tec_pd_arc_generic_city_planet_logic_finish = { relic = yes }
		}
		
	}
	
	ai_weight = {
		weight = 100
	}
}


# Military ecumenopolis
decision_tec_military_ecu = {
	icon = decision_tec_military_ecu

	enactment_time = 900

	resources = {
		category = decisions
		cost = {
			alloys = 2000
		}
	}
	
	potential = {
		OR = {
			is_planet_class = pc_city
			AND = {
				is_planet_class = pc_milarc
				NOT = { has_deposit = d_pd_necro_arc }
				NOT = { has_deposit = d_pd_shroud_arc }
				NOT = { has_deposit = d_pd_necro_arc_spot }
				NOT = { has_deposit = d_pd_shroud_arc_spot }
			}
		}
		exists = space_owner
		owner = {
			has_ascension_perk = ap_arcology_project
		}
		NOR = { 
			has_planet_flag = tec_ecumenopolis_spec_militarized
			has_planet_flag = tec_ecumenopolis_spec_science
			has_planet_flag = tec_ecumenopolis_spec_admin
			has_planet_flag = tec_ecumenopolis_spec_precursor
			#	has_planet_flag = tec_ecumenopolis_was_relic_planet
		}
	}

	effect = {
		custom_tooltip = decision_tec_military_ecu_effects
		hidden_effect = {
			change_pc = pc_city
			remove_deposit = d_milarc
			set_planet_flag = tec_ecumenopolis_spec_militarized
			set_planet_flag = tec_ecumenopolis_militarized_army

			#anticheese
			remove_planet_flag = tec_ecumenopolis_spec_science
			remove_planet_flag = tec_ecumenopolis_refinery_nospec
			remove_planet_flag = tec_ecumenopolis_spec_admin
			remove_planet_flag = tec_ecumenopolis_spec_precursor
			remove_planet_flag = tec_ecumenopolis_militarized_navy

			tec_pd_arc_planet_entity_and_atomsphere_generic = yes
		}
	}
	ai_weight = {
		weight = 0
	}
}

# Science ecumenopolis
decision_tec_science_ecu = {
	icon = decision_tec_science_ecu

	enactment_time = 900

	resources = {
		category = decisions
		cost = {
			alloys = 2000
		}
	}
	
	potential = {
		OR = {
			is_planet_class = pc_city
			AND = {
				is_planet_class = pc_ecocity
				NOT = { has_deposit = d_pd_necro_arc }
				NOT = { has_deposit = d_pd_shroud_arc }
				NOT = { has_deposit = d_pd_necro_arc_spot }
				NOT = { has_deposit = d_pd_shroud_arc_spot }
			}
		}
		exists = space_owner
		owner = {
			has_ascension_perk = ap_arcology_project
		}
		NOR = { 
			has_planet_flag = tec_ecumenopolis_spec_militarized
			has_planet_flag = tec_ecumenopolis_spec_science
			has_planet_flag = tec_ecumenopolis_spec_admin
			has_planet_flag = tec_ecumenopolis_spec_precursor
			#	has_planet_flag = tec_ecumenopolis_was_relic_planet
		}
	}


	effect = {
		custom_tooltip = decision_tec_science_ecu_effects
		hidden_effect = {
			change_pc = pc_city
			remove_deposit = d_ecogarden
			set_planet_flag = tec_ecumenopolis_spec_science
			set_planet_flag = tec_ecumenopolis_refinery_nospec

			#anticheese
			remove_planet_flag = tec_ecumenopolis_spec_militarized
			remove_planet_flag = tec_ecumenopolis_militarized_army
			remove_planet_flag = tec_ecumenopolis_spec_admin
			remove_planet_flag = tec_ecumenopolis_spec_precursor
			remove_planet_flag = tec_ecumenopolis_militarized_navy

			tec_pd_arc_planet_entity_and_atomsphere_generic = yes
		}
		
	}
	ai_weight = {
		weight = 0
	}
}

# Administration Ecumenopolis
decision_tec_administration_ecu = {
	icon = decision_tec_administration_ecu

	enactment_time = 900

	resources = {
		category = decisions
		cost = {
			alloys = 2000
		}
	}
	
	potential = {
		OR = {
			is_planet_class = pc_city
			AND = {
				is_planet_class = pc_ecocity
				NOT = { has_deposit = d_pd_necro_arc }
				NOT = { has_deposit = d_pd_shroud_arc }
				NOT = { has_deposit = d_pd_necro_arc_spot }
				NOT = { has_deposit = d_pd_shroud_arc_spot }
			}
		}
		exists = space_owner
		owner = {
			has_ascension_perk = ap_arcology_project
		}
		NOR = { 
			has_planet_flag = tec_ecumenopolis_spec_militarized
			has_planet_flag = tec_ecumenopolis_spec_science
			has_planet_flag = tec_ecumenopolis_spec_admin
			has_planet_flag = tec_ecumenopolis_spec_precursor
		#	has_planet_flag = tec_ecumenopolis_was_relic_planet
		}
	}


	effect = {
		custom_tooltip = decision_tec_administration_ecu_effects
		hidden_effect = {
			change_pc = pc_city
			remove_deposit = d_ecogarden
			set_planet_flag = tec_ecumenopolis_spec_admin

			#anticheese
			remove_planet_flag = tec_ecumenopolis_spec_science
			remove_planet_flag = tec_ecumenopolis_refinery_nospec

			remove_planet_flag = tec_ecumenopolis_spec_militarized
			remove_planet_flag = tec_ecumenopolis_militarized_army

			remove_planet_flag = tec_ecumenopolis_spec_precursor
			
			tec_pd_arc_planet_entity_and_atomsphere_generic = yes
		}
	}
	ai_weight = {
		weight = 0
	}
}


decision_tec_ecoworld_project = {
	owned_planets_only = yes
	icon = decision_tec_ecoworld_project

	enactment_time = 2700
	resources = {
		category = decisions
		cost = {
			influence = 150
			minerals = 7500
			food = 12500
		}
		cost = {
			trigger = {
				owner = {
					has_tradition = tr_tec_artifice_final_2
				}
			}
			minerals = -3750
			food = -6250
		}
	}

	potential = {
		NOR = {
			is_planet_class = pc_nuked #Unholy nuked planets!!
			is_planet_class = pc_relic
			is_planet_class = pc_machine
			is_planet_class = pc_hive
			tec_is_arcology = yes
			has_modifier = resort_colony
			has_modifier = penal_colony
			has_modifier = slave_colony
			tec_invalidates_ecoworld_project_comp = yes
		}

		tec_is_ecoworld = no

		habitable_structure = no
		tec_is_arcology = no

		exists = owner
		owner = {
			NOR = {
				has_ethic = ethic_fanatic_industrial
				has_valid_civic = civic_hive_devouring_swarm
			}
			OR = {
				is_ecologist = yes
				has_ascension_perk = ap_mastery_of_nature
			}
		}
	}

	allow = {
		tec_pd_arc_ecoworld_project_allow = yes
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_tec_ecoworld_project_effects
		custom_tooltip = decision_tec_ecoworld_project_unemployment_effects
		hidden_effect = {
			tec_pd_arc_terraforming_effect = yes
			tec_pd_arc_clean_evolved_modifiers = yes
			tec_pd_arc_demote_industrial_jobs = yes
			tec_pd_arc_planet_entity_and_atomsphere_generic = yes
		}

		add_modifier = { modifier = "pm_tec_ecoworld_planet" days = -1 }
	}

	ai_weight = {
		weight = 1
	}
}